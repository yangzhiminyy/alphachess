# Azure éƒ¨ç½²æŒ‡å— - AlphaChess ä¸­å›½è±¡æ£‹ AI

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

åŸºäºæ‚¨çš„éœ€æ±‚ï¼ˆäººæœºå¯¹æˆ˜ + ç¥ç»ç½‘ç»œè®­ç»ƒï¼‰å’Œæ¯æœˆ $150 é¢„ç®—ï¼Œä»¥ä¸‹æ˜¯æ¨èçš„ Azure éƒ¨ç½²æ¶æ„ï¼š

### ğŸ¯ æ¨èæ¶æ„ï¼ˆåˆ†ç¦»å¼éƒ¨ç½²ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Azure éƒ¨ç½²æ¶æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1ï¸âƒ£ Web åº”ç”¨å±‚ï¼ˆäººæœºå¯¹æˆ˜ï¼‰                               â”‚
â”‚     â””â”€ Azure App Service (B1 Basic)                     â”‚
â”‚        â€¢ FastAPI åç«¯ + React å‰ç«¯                       â”‚
â”‚        â€¢ CPU æ¨ç†ï¼ˆå¯¹æˆ˜å“åº”ï¼‰                             â”‚
â”‚        â€¢ æˆæœ¬ï¼š~$13/æœˆ                                    â”‚
â”‚                                                          â”‚
â”‚  2ï¸âƒ£ è®­ç»ƒå±‚ï¼ˆç¥ç»ç½‘ç»œè®­ç»ƒï¼‰                               â”‚
â”‚     â””â”€ Azure VM + GPU (NC6_Promo æˆ–æŒ‰éœ€å¯åŠ¨)            â”‚
â”‚        â€¢ PyTorch è®­ç»ƒç¯å¢ƒ                                â”‚
â”‚        â€¢ æŒ‰éœ€å¯åŠ¨/åœæ­¢                                    â”‚
â”‚        â€¢ æˆæœ¬ï¼š~$0.90/å°æ—¶ï¼ˆä»…è®­ç»ƒæ—¶è¿è¡Œï¼‰                â”‚
â”‚                                                          â”‚
â”‚  3ï¸âƒ£ å­˜å‚¨å±‚                                               â”‚
â”‚     â””â”€ Azure Blob Storage                               â”‚
â”‚        â€¢ æ¨¡å‹æ–‡ä»¶å­˜å‚¨                                     â”‚
â”‚        â€¢ è‡ªå¯¹å¼ˆæ•°æ®å­˜å‚¨                                   â”‚
â”‚        â€¢ æˆæœ¬ï¼š~$1-2/æœˆ                                   â”‚
â”‚                                                          â”‚
â”‚  4ï¸âƒ£ æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰                                       â”‚
â”‚     â””â”€ Azure Database for PostgreSQL (Flexible)         â”‚
â”‚        â€¢ è®­ç»ƒè®°å½•ã€ELO è¯„åˆ†                               â”‚
â”‚        â€¢ æˆæœ¬ï¼š~$7/æœˆï¼ˆBurstable B1msï¼‰                  â”‚
â”‚                                                          â”‚
â”‚  ğŸ’° æ€»æˆæœ¬ä¼°ç®—ï¼š$20-50/æœˆï¼ˆå¸¸é©»ï¼‰+ è®­ç»ƒæˆæœ¬ï¼ˆæŒ‰éœ€ï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ æ–¹æ¡ˆä¸€ï¼šç»æµå‹éƒ¨ç½²ï¼ˆæ¨è - é¢„ç®—å‹å¥½ï¼‰

### æ¶æ„ç»„ä»¶

#### 1. **Azure App Service (B1 Basic) - äººæœºå¯¹æˆ˜æœåŠ¡**
- **ç”¨é€”**ï¼šè¿è¡Œ FastAPI + React Web ç•Œé¢
- **é…ç½®**ï¼š
  - 1 Core, 1.75 GB RAM
  - Linux å®¹å™¨
  - Python 3.10
- **æˆæœ¬**ï¼š~$13/æœˆ
- **é€‚åˆåœºæ™¯**ï¼š
  - äººæœºå¯¹æˆ˜ï¼ˆä½¿ç”¨ CPU æ¨ç†ï¼‰
  - MCTS æœç´¢ï¼ˆ200 simsï¼Œå“åº”æ—¶é—´ 15-30 ç§’å¯æ¥å—ï¼‰
  - Alpha-Beta æœç´¢å¼•æ“

#### 2. **Azure VM with GPU (NC6_Promo) - è®­ç»ƒä¸“ç”¨**
- **ç”¨é€”**ï¼šç¥ç»ç½‘ç»œè®­ç»ƒï¼ˆæŒ‰éœ€å¯åŠ¨ï¼‰
- **é…ç½®**ï¼š
  - 6 vCPUs, 56 GB RAM
  - 1x NVIDIA Tesla K80 GPU
- **æˆæœ¬**ï¼š~$0.90/å°æ—¶ï¼ˆä»…è®­ç»ƒæ—¶å¯åŠ¨ï¼‰
- **ä½¿ç”¨ç­–ç•¥**ï¼š
  - æ¯å‘¨è®­ç»ƒ 1-2 æ¬¡ï¼Œæ¯æ¬¡ 4-8 å°æ—¶
  - æœˆæˆæœ¬ï¼š$7-15ï¼ˆå–å†³äºè®­ç»ƒé¢‘ç‡ï¼‰
  - è®­ç»ƒå®Œæˆåç«‹å³åœæ­¢ VM

#### 3. **Azure Blob Storage - æ¨¡å‹å’Œæ•°æ®å­˜å‚¨**
- **ç”¨é€”**ï¼š
  - å­˜å‚¨è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆ.pt æ–‡ä»¶ï¼‰
  - è‡ªå¯¹å¼ˆæ•°æ®ï¼ˆ.jsonl æ–‡ä»¶ï¼‰
- **æˆæœ¬**ï¼š~$1-2/æœˆï¼ˆLRS - æœ¬åœ°å†—ä½™å­˜å‚¨ï¼‰
- **å®¹é‡**ï¼š50GB è¶³å¤Ÿ

#### 4. **Azure Container Registry (å¯é€‰)**
- **ç”¨é€”**ï¼šå­˜å‚¨ Docker é•œåƒ
- **æˆæœ¬**ï¼šBasic tier $5/æœˆ

### ğŸ’° æœˆåº¦æˆæœ¬ä¼°ç®—

| æœåŠ¡ | é…ç½® | æœˆæˆæœ¬ï¼ˆUSDï¼‰ |
|------|------|--------------|
| App Service (B1) | äººæœºå¯¹æˆ˜æœåŠ¡ | $13 |
| Blob Storage | æ¨¡å‹/æ•°æ®å­˜å‚¨ | $2 |
| VM GPU è®­ç»ƒ | æ¯å‘¨ 8 å°æ—¶ | $7-15 |
| **æ€»è®¡** | | **$22-30/æœˆ** |

**å‰©ä½™é¢„ç®—**ï¼š$120-128/æœˆå¯ç”¨äºé¢å¤–çš„è®­ç»ƒæˆ–æ‰©å®¹

---

## ğŸš€ æ–¹æ¡ˆäºŒï¼šé«˜æ€§èƒ½éƒ¨ç½²ï¼ˆé¢„ç®—å……è£•ï¼‰

å¦‚æœéœ€è¦æ›´å¿«çš„å“åº”é€Ÿåº¦å’Œæ›´é¢‘ç¹çš„è®­ç»ƒï¼š

#### 1. **Azure App Service (P1V2) - æ›´å¼ºæ€§èƒ½**
- 2 Cores, 3.5 GB RAM
- æˆæœ¬ï¼š~$73/æœˆ
- ä¼˜åŠ¿ï¼šæ›´å¿«çš„ MCTS æ¨ç†

#### 2. **Azure ML Compute Instance - ä¸“ä¸šè®­ç»ƒ**
- GPU è®¡ç®—å®ä¾‹ï¼ˆNC6s_v3ï¼‰
- NVIDIA V100 GPU
- æˆæœ¬ï¼š~$3.06/å°æ—¶
- æŒ‰éœ€å¯åŠ¨/åœæ­¢

#### 3. **Azure Cosmos DB - é«˜æ€§èƒ½æ•°æ®åº“**
- ç”¨äºå­˜å‚¨å¯¹æˆ˜è®°å½•ã€ELO è¯„åˆ†
- æˆæœ¬ï¼š~$24/æœˆï¼ˆ400 RU/sï¼‰

### ğŸ’° æœˆåº¦æˆæœ¬ä¼°ç®—

| æœåŠ¡ | æœˆæˆæœ¬ï¼ˆUSDï¼‰ |
|------|--------------|
| App Service (P1V2) | $73 |
| Azure ML Compute (æ¯å‘¨ 8 å°æ—¶) | $25-50 |
| Blob Storage | $2 |
| Cosmos DB | $24 |
| **æ€»è®¡** | **$124-149/æœˆ** |

---

## ğŸ“ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### é˜¶æ®µä¸€ï¼šå‡†å¤‡å·¥ä½œ

#### 1. åˆ›å»º Azure èµ„æºç»„
```bash
az login
az group create --name alphachess-rg --location eastus
```

#### 2. åˆ›å»ºå­˜å‚¨è´¦æˆ·
```bash
az storage account create \
  --name alphachessstorage \
  --resource-group alphachess-rg \
  --location eastus \
  --sku Standard_LRS

# åˆ›å»º Blob å®¹å™¨
az storage container create \
  --name models \
  --account-name alphachessstorage

az storage container create \
  --name data \
  --account-name alphachessstorage
```

---

### é˜¶æ®µäºŒï¼šéƒ¨ç½² Web åº”ç”¨ï¼ˆäººæœºå¯¹æˆ˜ï¼‰

#### æ–¹å¼ Aï¼šä½¿ç”¨ Azure App Serviceï¼ˆæ¨èï¼‰

1. **åˆ›å»º App Service Plan**
```bash
az appservice plan create \
  --name alphachess-plan \
  --resource-group alphachess-rg \
  --location eastus \
  --sku B1 \
  --is-linux
```

2. **åˆ›å»º Web App**
```bash
az webapp create \
  --name alphachess-web \
  --resource-group alphachess-rg \
  --plan alphachess-plan \
  --runtime "PYTHON:3.10"
```

3. **é…ç½®éƒ¨ç½²**
```bash
# ä» GitHub/æœ¬åœ°éƒ¨ç½²
az webapp deployment source config-local-git \
  --name alphachess-web \
  --resource-group alphachess-rg

# è·å–éƒ¨ç½² URL
az webapp deployment list-publishing-credentials \
  --name alphachess-web \
  --resource-group alphachess-rg \
  --query scmUri \
  --output tsv
```

4. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
az webapp config appsettings set \
  --name alphachess-web \
  --resource-group alphachess-rg \
  --settings \
    AZURE_STORAGE_ACCOUNT="alphachessstorage" \
    AZURE_STORAGE_KEY="<your-storage-key>" \
    MODEL_PATH="/home/models/latest.pt"
```

5. **éƒ¨ç½²ä»£ç **
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
git remote add azure <deployment-url>
git push azure main
```

#### æ–¹å¼ Bï¼šä½¿ç”¨ Docker å®¹å™¨ï¼ˆæ›´çµæ´»ï¼‰

1. **åˆ›å»º Dockerfile**ï¼ˆè§ä¸‹æ–¹é…ç½®æ–‡ä»¶éƒ¨åˆ†ï¼‰

2. **æ„å»ºå¹¶æ¨é€é•œåƒ**
```bash
# åˆ›å»º Container Registry
az acr create \
  --name alphachessacr \
  --resource-group alphachess-rg \
  --sku Basic

# ç™»å½•
az acr login --name alphachessacr

# æ„å»ºé•œåƒ
docker build -t alphachessacr.azurecr.io/alphachess:latest .

# æ¨é€
docker push alphachessacr.azurecr.io/alphachess:latest
```

3. **ä»å®¹å™¨éƒ¨ç½² Web App**
```bash
az webapp create \
  --name alphachess-web \
  --resource-group alphachess-rg \
  --plan alphachess-plan \
  --deployment-container-image-name alphachessacr.azurecr.io/alphachess:latest
```

---

### é˜¶æ®µä¸‰ï¼šè®¾ç½® GPU è®­ç»ƒç¯å¢ƒ

#### é€‰é¡¹ Aï¼šAzure VM with GPUï¼ˆç»æµå‹ï¼‰

1. **åˆ›å»º GPU è™šæ‹Ÿæœº**
```bash
az vm create \
  --name alphachess-train-vm \
  --resource-group alphachess-rg \
  --location eastus \
  --size Standard_NC6_Promo \
  --image microsoft-dsvm:ubuntu-2004:2004-gen2:latest \
  --admin-username azureuser \
  --generate-ssh-keys
```

2. **è¿æ¥ VM å¹¶é…ç½®ç¯å¢ƒ**
```bash
# SSH è¿æ¥
ssh azureuser@<vm-public-ip>

# å®‰è£…ä¾èµ–
sudo apt update
sudo apt install -y python3-pip git
pip3 install torch torchvision --index-url https://download.pytorch.org/whl/cu118
pip3 install fastapi uvicorn numpy

# å…‹éš†ä»£ç 
git clone <your-repo-url>
cd alphachess

# æŒ‚è½½ Blob Storageï¼ˆå¯é€‰ï¼‰
sudo apt install -y blobfuse
```

3. **è¿è¡Œè®­ç»ƒ**
```bash
# ç”Ÿæˆè‡ªå¯¹å¼ˆæ•°æ®
python scripts/self_play_generic.py \
  --game xiangqi \
  --games 100 \
  --sims 400 \
  --out /data/selfplay_001.jsonl

# è®­ç»ƒæ¨¡å‹
python scripts/train_generic.py \
  --game xiangqi \
  --data /data/selfplay_001.jsonl \
  --model_out /models/v1.pt \
  --epochs 20 \
  --batch_size 128 \
  --lr 0.001

# ä¸Šä¼ åˆ° Blob Storage
az storage blob upload \
  --account-name alphachessstorage \
  --container-name models \
  --name v1.pt \
  --file /models/v1.pt
```

4. **åœæ­¢ VM ä»¥èŠ‚çœæˆæœ¬**
```bash
az vm deallocate \
  --name alphachess-train-vm \
  --resource-group alphachess-rg
```

#### é€‰é¡¹ Bï¼šAzure Machine Learningï¼ˆä¸“ä¸šçº§ï¼‰

1. **åˆ›å»º ML å·¥ä½œåŒº**
```bash
az ml workspace create \
  --name alphachess-ml \
  --resource-group alphachess-rg \
  --location eastus
```

2. **åˆ›å»ºè®¡ç®—å®ä¾‹**ï¼ˆé€šè¿‡ Azure Portal æ›´æ–¹ä¾¿ï¼‰
- ç™»å½• Azure Portal
- è¿›å…¥ Azure Machine Learning Studio
- åˆ›å»ºè®¡ç®—å®ä¾‹ï¼ˆNC6s_v3 with GPUï¼‰
- é…ç½®è‡ªåŠ¨å…³é—­ï¼ˆè®­ç»ƒå®Œæˆåè‡ªåŠ¨åœæ­¢ï¼‰

3. **æäº¤è®­ç»ƒä½œä¸š**
```python
# training_job.py
from azure.ai.ml import MLClient
from azure.ai.ml.entities import command

ml_client = MLClient.from_config()

job = command(
    code="./scripts",
    command="python train_generic.py --game xiangqi --data ${{inputs.data}} --epochs 20",
    environment="AzureML-pytorch-1.13-ubuntu20.04-py38-cuda11.7-gpu",
    compute="gpu-cluster",
    inputs={"data": {"type": "uri_folder", "path": "azureml://datastores/data"}},
)

ml_client.jobs.create_or_update(job)
```

---

### é˜¶æ®µå››ï¼šé›†æˆå­˜å‚¨å’Œè‡ªåŠ¨åŒ–

#### 1. ä¿®æ”¹ä»£ç ä»¥ä½¿ç”¨ Azure Blob Storage

åˆ›å»º `azure_storage.py`ï¼ˆè§ä¸‹æ–¹é…ç½®æ–‡ä»¶éƒ¨åˆ†ï¼‰

#### 2. é…ç½®è‡ªåŠ¨è®­ç»ƒæµæ°´çº¿

åˆ›å»º Azure Function æˆ– Logic App å®ç°ï¼š
- æ¯å‘¨è‡ªåŠ¨å¯åŠ¨è®­ç»ƒ VM
- è¿è¡Œè‡ªå¯¹å¼ˆ + è®­ç»ƒ
- ä¸Šä¼ æ¨¡å‹åˆ° Blob Storage
- åœæ­¢ VM
- é€šçŸ¥ç®¡ç†å‘˜

---

## ğŸ› ï¸ å¿…è¦çš„é…ç½®æ–‡ä»¶

### 1. Dockerfile
```dockerfile
FROM python:3.10-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["uvicorn", "api.server:app", "--host", "0.0.0.0", "--port", "8000"]
```

### 2. .dockerignore
```
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
data/
models/*.pt
.git/
.gitignore
*.log
.vscode/
.cursor/
```

### 3. startup.shï¼ˆAzure App Serviceï¼‰
```bash
#!/bin/bash
python -m pip install --upgrade pip
pip install -r requirements.txt
uvicorn api.server:app --host 0.0.0.0 --port 8000
```

---

## ğŸ“Š æˆæœ¬ä¼˜åŒ–å»ºè®®

### 1. **ä½¿ç”¨ Azure Reserved Instances**
- å¦‚æœç¡®å®šé•¿æœŸä½¿ç”¨ï¼Œè´­ä¹° 1 å¹´é¢„ç•™å®ä¾‹å¯èŠ‚çœ 30-40%

### 2. **åˆç†ä½¿ç”¨ GPU èµ„æº**
- è®­ç»ƒæ—¶ä½¿ç”¨ Spot VMï¼ˆå¯èŠ‚çœ 60-90%ï¼Œä½†å¯èƒ½è¢«æŠ¢å ï¼‰
- è®¾ç½®è‡ªåŠ¨å…³é—­ç­–ç•¥
- æ‰¹é‡è®­ç»ƒï¼ˆä¸€æ¬¡æ€§å®Œæˆå¤šè½®è¿­ä»£ï¼‰

```bash
# ä½¿ç”¨ Spot VM åˆ›å»ºè®­ç»ƒå®ä¾‹
az vm create \
  --name alphachess-train-spot \
  --resource-group alphachess-rg \
  --size Standard_NC6 \
  --priority Spot \
  --max-price 0.50 \
  --eviction-policy Deallocate
```

### 3. **ä½¿ç”¨ Azure å­¦ç”Ÿè®¢é˜…ï¼ˆå¦‚é€‚ç”¨ï¼‰**
- æ¯æœˆ $100 å…è´¹é¢åº¦
- å…è´¹çš„ B1 App Serviceï¼ˆ12 ä¸ªæœˆï¼‰

### 4. **CDN åŠ é€Ÿï¼ˆå¯é€‰ï¼‰**
- ä½¿ç”¨ Azure CDN åŠ é€Ÿå‰ç«¯é™æ€èµ„æº
- æˆæœ¬å¾ˆä½ï¼ˆ$0.081/GBï¼‰

### 5. **ç›‘æ§å’Œè‡ªåŠ¨åŒ–**
- è®¾ç½® Azure Monitor è­¦æŠ¥ï¼ˆæˆæœ¬è¶…é™æ—¶é€šçŸ¥ï¼‰
- ä½¿ç”¨ Azure Automation è‡ªåŠ¨å¯åŠ¨/åœæ­¢ VM

```bash
# åˆ›å»ºé¢„ç®—è­¦æŠ¥
az consumption budget create \
  --budget-name alphachess-budget \
  --amount 150 \
  --time-grain Monthly \
  --category Cost
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. **ä½¿ç”¨ Azure Key Vault å­˜å‚¨æ•æ„Ÿä¿¡æ¯**
```bash
az keyvault create \
  --name alphachess-kv \
  --resource-group alphachess-rg \
  --location eastus

# å­˜å‚¨å­˜å‚¨å¯†é’¥
az keyvault secret set \
  --vault-name alphachess-kv \
  --name storage-key \
  --value "<your-storage-key>"
```

### 2. **å¯ç”¨ HTTPS**
- App Service è‡ªåŠ¨æä¾› SSL/TLS
- å¯ç»‘å®šè‡ªå®šä¹‰åŸŸå + Let's Encrypt è¯ä¹¦

### 3. **é…ç½®ç½‘ç»œå®‰å…¨ç»„ï¼ˆNSGï¼‰**
- é™åˆ¶ VM çš„å…¥ç«™è®¿é—®
- åªå…è®¸å¿…è¦çš„ç«¯å£ï¼ˆSSH 22, HTTP 80, HTTPS 443ï¼‰

---

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### 1. **Azure Application Insights**
```bash
az monitor app-insights component create \
  --app alphachess-insights \
  --resource-group alphachess-rg \
  --location eastus \
  --application-type web
```

åœ¨ `api/server.py` ä¸­é›†æˆï¼š
```python
from opencensus.ext.azure.log_exporter import AzureLogHandler
import logging

logger = logging.getLogger(__name__)
logger.addHandler(AzureLogHandler(
    connection_string='InstrumentationKey=<your-key>'
))
```

### 2. **è®¾ç½®æ—¥å¿—åˆ†æ**
- ç›‘æ§ API å“åº”æ—¶é—´
- è·Ÿè¸ªé”™è¯¯ç‡
- åˆ†æç”¨æˆ·è¡Œä¸º

---

## ğŸš¦ æ¨èçš„å®æ–½è·¯çº¿å›¾

### ç¬¬ 1 å‘¨ï¼šåŸºç¡€éƒ¨ç½²
- âœ… åˆ›å»º Azure èµ„æºç»„å’Œå­˜å‚¨è´¦æˆ·
- âœ… éƒ¨ç½² Web åº”ç”¨åˆ° App Service
- âœ… æµ‹è¯•äººæœºå¯¹æˆ˜åŠŸèƒ½

### ç¬¬ 2 å‘¨ï¼šè®­ç»ƒç¯å¢ƒ
- âœ… åˆ›å»º GPU è™šæ‹Ÿæœº
- âœ… è¿è¡Œåˆå§‹è®­ç»ƒï¼ˆå°è§„æ¨¡ï¼‰
- âœ… é›†æˆ Blob Storage

### ç¬¬ 3 å‘¨ï¼šä¼˜åŒ–å’Œè‡ªåŠ¨åŒ–
- âœ… è®¾ç½®è‡ªåŠ¨å¯åœè„šæœ¬
- âœ… é…ç½®ç›‘æ§å’Œè­¦æŠ¥
- âœ… æ€§èƒ½ä¼˜åŒ–

### ç¬¬ 4 å‘¨ï¼šå¢å¼ºåŠŸèƒ½
- âœ… æ·»åŠ ç”¨æˆ·è®¤è¯ï¼ˆAzure ADï¼‰
- âœ… å®ç°å¯¹æˆ˜å†å²è®°å½•
- âœ… éƒ¨ç½²å¤šä¸ªæ¨¡å‹ç‰ˆæœ¬

---

## ğŸ¯ æœ€ç»ˆæ¨èé…ç½®ï¼ˆ$150 é¢„ç®—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§ç¯å¢ƒé…ç½®                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ App Service B1: $13/æœˆ               â”‚
â”‚  â€¢ Blob Storage: $2/æœˆ                  â”‚
â”‚  â€¢ GPU VM (æŒ‰éœ€): $10-20/æœˆ             â”‚
â”‚  â€¢ Application Insights: $5/æœˆ          â”‚
â”‚  â€¢ é¢„ç•™é¢„ç®—: $110-120/æœˆ                â”‚
â”‚                                         â”‚
â”‚  æ€»è®¡: $30-40/æœˆï¼ˆåŸºç¡€è¿è¥ï¼‰            â”‚
â”‚        + $110 è®­ç»ƒ/æ‰©å®¹é¢„ç®—              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¿™ä¸ªé…ç½®å¯ä»¥ï¼š
- âœ… ç¨³å®šè¿è¡Œäººæœºå¯¹æˆ˜æœåŠ¡
- âœ… æ¯å‘¨è¿›è¡Œ 8-16 å°æ—¶ GPU è®­ç»ƒ
- âœ… æ”¯æŒ 100+ å¹¶å‘ç”¨æˆ·
- âœ… è‡ªåŠ¨æ‰©å±•èƒ½åŠ›
- âœ… å……è¶³çš„é¢„ç®—ä½™é‡

---

## â“ å¸¸è§é—®é¢˜

### Q1: èƒ½å¦å®Œå…¨ä½¿ç”¨å…è´¹å±‚ï¼Ÿ
A: å¯ä»¥ä½¿ç”¨ Azure å…è´¹å±‚è¿›è¡Œæ¦‚å¿µéªŒè¯ï¼Œä½†ä¸é€‚åˆç”Ÿäº§ï¼š
- F1 Free App Serviceï¼ˆéå¸¸æ…¢ï¼Œæ— è‡ªå®šä¹‰åŸŸåï¼‰
- å…è´¹ Blob Storageï¼ˆ5GB é™åˆ¶ï¼‰
- æ—  GPU å…è´¹é€‰é¡¹

### Q2: è®­ç»ƒé€Ÿåº¦å¤šå¿«ï¼Ÿ
A: 
- NC6 (K80): ~5-10 åˆ†é’Ÿ/epochï¼ˆ10k æ ·æœ¬ï¼‰
- NC6s_v3 (V100): ~2-3 åˆ†é’Ÿ/epoch

### Q3: å¦‚ä½•å¤„ç†å¹¶å‘ç”¨æˆ·ï¼Ÿ
A: 
- B1 å¯å¤„ç† 10-20 å¹¶å‘ç”¨æˆ·
- å‡çº§åˆ° P1V2 å¯å¤„ç† 100+ ç”¨æˆ·
- ä½¿ç”¨ Azure Front Door + å¤šå®ä¾‹æ‰©å±•

### Q4: æ¨¡å‹æ›´æ–°å¦‚ä½•è‡ªåŠ¨åŒ–ï¼Ÿ
A: ä½¿ç”¨ Azure DevOps Pipeline æˆ– GitHub Actionsï¼š
```yaml
# .github/workflows/deploy.yml
name: Deploy Model
on:
  push:
    paths:
      - 'models/*.pt'
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Upload to Blob
        run: |
          az storage blob upload \
            --account-name alphachessstorage \
            --container-name models \
            --name latest.pt \
            --file models/latest.pt
```

---

## ğŸ“ è·å–å¸®åŠ©

- Azure æ–‡æ¡£ï¼šhttps://docs.microsoft.com/azure
- PyTorch on Azureï¼šhttps://docs.microsoft.com/azure/machine-learning/how-to-train-pytorch
- Azure å®šä»·è®¡ç®—å™¨ï¼šhttps://azure.microsoft.com/pricing/calculator/

---

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶å’¨è¯¢ã€‚** ğŸš€

